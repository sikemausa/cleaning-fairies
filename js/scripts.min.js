var mr_firstSectionHeight,mr_nav,mr_fixedAt,mr_navOuterHeight,mr_navScrolled=!1,mr_navFixed=!1,mr_outOfSight=!1,mr_floatingProjectSections,mr_scrollTop=0;function updateNav(){var scrollY=mr_scrollTop;if(scrollY<=0)return mr_navFixed&&(mr_navFixed=!1,mr_nav.removeClass("fixed")),mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight")),void(mr_navScrolled&&(mr_navScrolled=!1,mr_nav.removeClass("scrolled")));if(scrollY>mr_navOuterHeight+mr_fixedAt){if(!mr_navScrolled)return mr_nav.addClass("scrolled"),void(mr_navScrolled=!0)}else scrollY>mr_navOuterHeight?(mr_navFixed||(mr_nav.addClass("fixed"),mr_navFixed=!0),scrollY>mr_navOuterHeight+10?mr_outOfSight||(mr_nav.addClass("outOfSight"),mr_outOfSight=!0):mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight"))):(mr_navFixed&&(mr_navFixed=!1,mr_nav.removeClass("fixed")),mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight"))),mr_navScrolled&&(mr_navScrolled=!1,mr_nav.removeClass("scrolled"))}function capitaliseFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}function initializeMasonry(){$(".masonry").each((function(){var container=$(this).get(0),msnry=new Masonry(container,{itemSelector:".masonry-item"});msnry.on("layoutComplete",(function(){mr_firstSectionHeight=$(".main-container section:nth-of-type(1)").outerHeight(!0),$(".filters.floating").length&&(setupFloatingProjectFilters(),updateFloatingFilters(),window.addEventListener("scroll",updateFloatingFilters,!1)),$(".masonry").addClass("fadeIn"),$(".masonry-loader").addClass("fadeOut"),$(".masonryFlyIn").length&&masonryFlyIn()})),msnry.layout()}))}function masonryFlyIn(){var $items=$(".masonryFlyIn .masonry-item"),time=0;$items.each((function(){var item=$(this);setTimeout((function(){item.addClass("fadeIn")}),time),time+=170}))}function setupFloatingProjectFilters(){mr_floatingProjectSections=[],$(".filters.floating").closest("section").each((function(){var section=$(this);mr_floatingProjectSections.push({section:section.get(0),outerHeight:section.outerHeight(),elemTop:section.offset().top,elemBottom:section.offset().top+section.outerHeight(),filters:section.find(".filters.floating"),filersHeight:section.find(".filters.floating").outerHeight(!0)})}))}function updateFloatingFilters(){for(var l=mr_floatingProjectSections.length;l--;){var section=mr_floatingProjectSections[l];section.elemTop<mr_scrollTop&&void 0===window.mr_variant?(section.filters.css({position:"fixed",top:"16px",bottom:"auto"}),mr_navScrolled&&section.filters.css({transform:"translate3d(-50%,48px,0)"}),mr_scrollTop>section.elemBottom-70&&(section.filters.css({position:"absolute",bottom:"16px",top:"auto"}),section.filters.css({transform:"translate3d(-50%,0,0)"}))):section.filters.css({position:"absolute",transform:"translate3d(-50%,0,0)"})}}function prepareSignup(iFrame){var form=jQuery("<form />"),div=jQuery("<div />"),action;return jQuery(div).html(iFrame.attr("srcdoc")),action=jQuery(div).find("form").attr("action"),/list-manage\.com/.test(action)&&"//"==(action=action.replace("/post?","/post-json?")+"&c=?").substr(0,2)&&(action="http:"+action),/createsend\.com/.test(action)&&(action+="?callback=?"),form.attr("action",action),jQuery(div).find("input, select, textarea").not('input[type="submit"]').each((function(){jQuery(this).clone().appendTo(form)})),form}$(document).ready((function(){"use strict";var innerLinks=$("a.inner-link"),dsq;if(innerLinks.length){innerLinks.each((function(){var link=$(this),href;"#"!==link.attr("href").charAt(0)&&link.removeClass("inner-link")}));var offset=0;$("body[data-smooth-scroll-offset]").length&&(offset=$("body").attr("data-smooth-scroll-offset"),offset*=1),smoothScroll.init({selector:".inner-link",selectorHeader:null,speed:750,easing:"easeInOutCubic",offset:offset})}if(addEventListener("scroll",(function(){mr_scrollTop=window.pageYOffset}),!1),$(".background-image-holder").each((function(){var imgSrc=$(this).children("img").attr("src");$(this).css("background",'url("'+imgSrc+'")'),$(this).children("img").hide(),$(this).css("background-position","initial")})),setTimeout((function(){$(".background-image-holder").each((function(){$(this).addClass("fadeIn")}))}),200),$('[data-toggle="tooltip"]').tooltip(),$("ul[data-bullet]").each((function(){var bullet=$(this).attr("data-bullet");$(this).find("li").prepend('<i class="'+bullet+'"></i>')})),$(".progress-bar").each((function(){$(this).css("width",$(this).attr("data-progress")+"%")})),$("nav").hasClass("fixed")||$("nav").hasClass("absolute")?$("body").addClass("nav-is-overlay"):($(".nav-container").css("min-height",$("nav").outerHeight(!0)),$(window).resize((function(){$(".nav-container").css("min-height",$("nav").outerHeight(!0))})),$(window).width()>768&&$(".parallax:nth-of-type(1) .background-image-holder").css("top",-$("nav").outerHeight(!0)),$(window).width()>768&&$("section.fullscreen:nth-of-type(1)").css("height",$(window).height()-$("nav").outerHeight(!0))),$("nav").hasClass("bg-dark")&&$(".nav-container").addClass("bg-dark"),mr_nav=$("body .nav-container nav:first"),mr_navOuterHeight=$("body .nav-container nav:first").outerHeight(),mr_fixedAt=void 0!==mr_nav.attr("data-fixed-at")?parseInt(mr_nav.attr("data-fixed-at").replace("px","")):parseInt($("section:nth-of-type(1)").outerHeight()),window.addEventListener("scroll",updateNav,!1),$(".menu > li > ul").each((function(){var menu=$(this).offset(),farRight=menu.left+$(this).outerWidth(!0);if(farRight>$(window).width()&&!$(this).hasClass("mega-menu"))$(this).addClass("make-right");else if(farRight>$(window).width()&&$(this).hasClass("mega-menu")){var isOnScreen=$(window).width()-menu.left,difference=$(this).outerWidth(!0)-isOnScreen;$(this).css("margin-left",-difference)}})),$(".mobile-toggle").click((function(){$(".nav-bar").toggleClass("nav-open"),$(this).toggleClass("active")})),$(".menu li").click((function(e){e||(e=window.event),e.stopPropagation(),$(this).find("ul").length?$(this).toggleClass("toggle-sub"):$(this).parents(".toggle-sub").removeClass("toggle-sub")})),$(".menu li a").click((function(){$(this).hasClass("inner-link")&&$(this).closest(".nav-bar").removeClass("nav-open")})),$(".module.widget-handle").click((function(){$(this).toggleClass("toggle-widget-handle")})),$(".search-widget-handle .search-form input").click((function(e){e||(e=window.event),e.stopPropagation()})),$(".offscreen-toggle").length?$("body").addClass("has-offscreen-nav"):$("body").removeClass("has-offscreen-nav"),$(".offscreen-toggle").click((function(){$(".main-container").toggleClass("reveal-nav"),$("nav").toggleClass("reveal-nav"),$(".offscreen-container").toggleClass("reveal-nav")})),$(".main-container").click((function(){$(this).hasClass("reveal-nav")&&($(this).removeClass("reveal-nav"),$(".offscreen-container").removeClass("reveal-nav"),$("nav").removeClass("reveal-nav"))})),$(".offscreen-container a").click((function(){$(".offscreen-container").removeClass("reveal-nav"),$(".main-container").removeClass("reveal-nav"),$("nav").removeClass("reveal-nav")})),$(".projects").each((function(){var filters="";$(this).find(".project").each((function(){var filterTags;$(this).attr("data-filter").split(",").forEach((function(tagName){-1==filters.indexOf(tagName)&&(filters+='<li data-filter="'+tagName+'">'+capitaliseFirstLetter(tagName)+"</li>")})),$(this).closest(".projects").find("ul.filters").empty().append('<li data-filter="all" class="active">All</li>').append(filters)}))})),$(".filters li").click((function(){var filter=$(this).attr("data-filter");$(this).closest(".filters").find("li").removeClass("active"),$(this).addClass("active"),$(this).closest(".projects").find(".project").each((function(){var filters;-1==$(this).attr("data-filter").indexOf(filter)?$(this).addClass("inactive"):$(this).removeClass("inactive")})),"all"==filter&&$(this).closest(".projects").find(".project").removeClass("inactive")})),$(".tweets-feed").each((function(index){jQuery(this).attr("id","tweets-"+index)})).each((function(index){var element=$("#tweets-"+index),TweetConfig={domId:"",maxTweets:element.attr("data-amount"),enableLinks:!0,showUser:!0,showTime:!0,dateFunction:"",showRetweet:!1,customCallback:handleTweets};function handleTweets(tweets){for(var x=tweets.length,n=0,element=document.getElementById("tweets-"+index),html='<ul class="slides">';n<x;)html+="<li>"+tweets[n]+"</li>",n++;return html+="</ul>",element.innerHTML=html,$(".tweets-slider").length&&$(".tweets-slider").flexslider({directionNav:!1,controlNav:!1}),html}void 0!==element.attr("data-widget-id")?TweetConfig.id=element.attr("data-widget-id"):void 0!==element.attr("data-feed-name")&&""!==element.attr("data-feed-name")?TweetConfig.profile={screenName:element.attr("data-feed-name").replace("@","")}:TweetConfig.profile={screenName:"twitter"},twitterFetcher.fetch(TweetConfig)})),$(".instafeed").length&&(jQuery.fn.spectragram.accessData={accessToken:"1406933036.dc95b96.2ed56eddc62f41cbb22c1573d58625a2",clientID:"87e6d2b8a0ef4c7ab8bc45e80ddd0c6a"},$(".instafeed").each((function(){var feedID=$(this).attr("data-user-name");$(this).children("ul").spectragram("getUserFeed",{query:feedID,max:12})}))),$(".flickr-feed").length&&$(".flickr-feed").each((function(){var userID=$(this).attr("data-user-id"),albumID=$(this).attr("data-album-id");$(this).flickrPhotoStream({id:userID,setId:albumID,container:'<li class="masonry-item" />'}),setTimeout((function(){initializeMasonry(),window.dispatchEvent(new Event("resize"))}),1e3)})),$(".slider-all-controls, .slider-paging-controls, .slider-arrow-controls, .slider-thumb-controls, .logo-carousel").length&&($(".slider-all-controls").flexslider({start:function(slider){slider.find(".slides li:first-child").find(".fs-vid-background video").length&&slider.find(".slides li:first-child").find(".fs-vid-background video").get(0).play()},after:function(slider){slider.find(".fs-vid-background video").length&&(slider.find("li:not(.flex-active-slide)").find(".fs-vid-background video").length&&slider.find("li:not(.flex-active-slide)").find(".fs-vid-background video").get(0).pause(),slider.find(".flex-active-slide").find(".fs-vid-background video").length&&slider.find(".flex-active-slide").find(".fs-vid-background video").get(0).play())}}),$(".slider-paging-controls").flexslider({animation:"slide",directionNav:!1}),$(".slider-arrow-controls").flexslider({controlNav:!1}),$(".slider-thumb-controls .slides li").each((function(){var imgSrc=$(this).find("img").attr("src");$(this).attr("data-thumb",imgSrc)})),$(".slider-thumb-controls").flexslider({animation:"slide",controlNav:"thumbnails",directionNav:!0}),$(".logo-carousel").flexslider({minItems:1,maxItems:4,move:1,itemWidth:200,itemMargin:0,animation:"slide",slideshow:!0,slideshowSpeed:3e3,directionNav:!1,controlNav:!1})),$(".lightbox-grid li a").each((function(){var galleryTitle=$(this).closest(".lightbox-grid").attr("data-gallery-title");$(this).attr("data-lightbox",galleryTitle)})),$("iframe[data-provider]").each((function(){var provider=jQuery(this).attr("data-provider"),videoID=jQuery(this).attr("data-video-id"),autoplay=jQuery(this).attr("data-autoplay"),vidURL="";"vimeo"==provider?(vidURL="http://player.vimeo.com/video/"+videoID+"?badge=0&title=0&byline=0&title=0&autoplay="+autoplay,$(this).attr("data-src",vidURL)):"youtube"==provider?(vidURL="https://www.youtube.com/embed/"+videoID+"?showinfo=0&autoplay="+autoplay,$(this).attr("data-src",vidURL)):console.log("Only Vimeo and Youtube videos are supported at this time")})),jQuery(".foundry_modal[modal-link]").remove(),$(".foundry_modal").length&&!jQuery(".modal-screen").length)var modalScreen=jQuery("<div />").addClass("modal-screen").appendTo("body");function validateFields(form){var name,error,originalErrorMessage;return $(form).find('.validate-required[type="checkbox"]').each((function(){$('[name="'+$(this).attr("name")+'"]:checked').length||(error=1,name=$(this).attr("name").replace("[]",""),form.find(".form-error").text("Please tick at least one "+name+" box."))})),$(form).find(".validate-required").each((function(){""===$(this).val()?($(this).addClass("field-error"),error=1):$(this).removeClass("field-error")})),$(form).find(".validate-email").each((function(){/(.+)@(.+){2,}\.(.+){2,}/.test($(this).val())?$(this).removeClass("field-error"):($(this).addClass("field-error"),error=1)})),form.find(".field-error").length||form.find(".form-error").fadeOut(1e3),error}function getURLParameter(name){return decodeURIComponent((new RegExp("[?|&]"+name+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}if(jQuery(".foundry_modal").click((function(){jQuery(this).addClass("modal-acknowledged")})),jQuery(document).on("wheel mousewheel scroll",".foundry_modal, .modal-screen",(function(evt){return $(this).get(0).scrollTop+=evt.originalEvent.deltaY,!1})),$(".modal-container:not([modal-link])").each((function(index){if(jQuery(this).find("iframe[src]").length){jQuery(this).find(".foundry_modal").addClass("iframe-modal");var iframe=jQuery(this).find("iframe");iframe.attr("data-src",iframe.attr("src")),iframe.attr("src","")}jQuery(this).find(".btn-modal").attr("modal-link",index),jQuery('.foundry_modal[modal-link="'+index+'"]').length||jQuery(this).find(".foundry_modal").clone().appendTo("body").attr("modal-link",index).prepend(jQuery('<i class="ti-close close-modal">'))})),$(".btn-modal").unbind("click").click((function(){var linkedModal=jQuery('.foundry_modal[modal-link="'+jQuery(this).attr("modal-link")+'"]'),autoplayMsg="";if(jQuery(".modal-screen").toggleClass("reveal-modal"),linkedModal.find("iframe").length){if("1"===linkedModal.find("iframe").attr("data-autoplay"))var autoplayMsg="&autoplay=1";linkedModal.find("iframe").attr("src",linkedModal.find("iframe").attr("data-src")+autoplayMsg)}return linkedModal.find("video").length&&linkedModal.find("video").get(0).play(),linkedModal.toggleClass("reveal-modal"),!1})),$(".foundry_modal[data-time-delay]").each((function(){var modal=$(this),delay=modal.attr("data-time-delay");modal.prepend($('<i class="ti-close close-modal">')),void 0!==modal.attr("data-cookie")&&mr_cookies.hasItem(modal.attr("data-cookie"))||setTimeout((function(){modal.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal")}),delay)})),$(".foundry_modal[data-show-on-exit]").each((function(){var modal=$(this),exitSelector=$(modal.attr("data-show-on-exit"));$(exitSelector).length&&(modal.prepend($('<i class="ti-close close-modal">')),$(document).on("mouseleave",exitSelector,(function(){$("body .reveal-modal").length||void 0!==modal.attr("data-cookie")&&mr_cookies.hasItem(modal.attr("data-cookie"))||(modal.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal"))})))})),$(".foundry_modal[data-hide-after]").each((function(){var modal=$(this),delay=modal.attr("data-hide-after");void 0!==modal.attr("data-cookie")&&mr_cookies.hasItem(modal.attr("data-cookie"))||setTimeout((function(){modal.hasClass("modal-acknowledged")||(modal.removeClass("reveal-modal"),$(".modal-screen").removeClass("reveal-modal"))}),delay)})),jQuery(".close-modal:not(.modal-strip .close-modal)").unbind("click").click((function(){var modal=jQuery(this).closest(".foundry_modal");modal.toggleClass("reveal-modal"),void 0!==modal.attr("data-cookie")&&mr_cookies.setItem(modal.attr("data-cookie"),"true",1/0),modal.find("iframe").length&&modal.find("iframe").attr("src",""),jQuery(".modal-screen").removeClass("reveal-modal")})),jQuery(".modal-screen").unbind("click").click((function(){jQuery(".foundry_modal.reveal-modal").find("iframe").length&&jQuery(".foundry_modal.reveal-modal").find("iframe").attr("src",""),jQuery(".foundry_modal.reveal-modal").toggleClass("reveal-modal"),jQuery(this).toggleClass("reveal-modal")})),jQuery(document).keyup((function(e){27==e.keyCode&&(jQuery(".foundry_modal").find("iframe").length&&jQuery(".foundry_modal").find("iframe").attr("src",""),jQuery(".foundry_modal").removeClass("reveal-modal"),jQuery(".modal-screen").removeClass("reveal-modal"))})),jQuery(".modal-strip").each((function(){jQuery(this).find(".close-modal").length||jQuery(this).append(jQuery('<i class="ti-close close-modal">'));var modal=jQuery(this);void 0!==modal.attr("data-cookie")&&mr_cookies.hasItem(modal.attr("data-cookie"))||setTimeout((function(){modal.addClass("reveal-modal")}),1e3)})),jQuery(".modal-strip .close-modal").click((function(){var modal=jQuery(this).closest(".modal-strip");return void 0!==modal.attr("data-cookie")&&mr_cookies.setItem(modal.attr("data-cookie"),"true",1/0),jQuery(this).closest(".modal-strip").removeClass("reveal-modal"),!1})),jQuery(".close-iframe").click((function(){jQuery(this).closest(".modal-video").removeClass("reveal-modal"),jQuery(this).siblings("iframe").attr("src",""),jQuery(this).siblings("video").get(0).pause()})),$(".checkbox-option").on("click",(function(){$(this).toggleClass("checked");var checkbox=$(this).find("input");!1===checkbox.prop("checked")?checkbox.prop("checked",!0):checkbox.prop("checked",!1)})),$(".radio-option").click((function(){var checked=$(this).hasClass("checked"),name=$(this).find("input").attr("name");checked||($('input[name="'+name+'"]').parent().removeClass("checked"),$(this).addClass("checked"),$(this).find("input").prop("checked",!0))})),$(".accordion li").click((function(){$(this).closest(".accordion").hasClass("one-open")?($(this).closest(".accordion").find("li").removeClass("active"),$(this).addClass("active")):$(this).toggleClass("active"),void 0!==window.mr_parallax&&setTimeout(mr_parallax.windowLoad,500)})),$(".tabbed-content").each((function(){$(this).append('<ul class="content"></ul>')})),$(".tabs li").each((function(){var originalTab=$(this),activeClass="";originalTab.is(".tabs>li:first-child")&&(activeClass=' class="active"');var tabContent=originalTab.find(".tab-content").detach().wrap("<li"+activeClass+"></li>").parent();originalTab.closest(".tabbed-content").find(".content").append(tabContent)})),$(".tabs li").click((function(){$(this).closest(".tabs").find("li").removeClass("active"),$(this).addClass("active");var liIndex=$(this).index()+1;$(this).closest(".tabbed-content").find(".content>li").removeClass("active"),$(this).closest(".tabbed-content").find(".content>li:nth-of-type("+liIndex+")").addClass("active")})),$("section").closest("body").find(".local-video-container .play-button").click((function(){$(this).siblings(".background-image-holder").removeClass("fadeIn"),$(this).siblings(".background-image-holder").css("z-index",-1),$(this).css("opacity",0),$(this).siblings("video").get(0).play()})),$("section").closest("body").find(".player").each((function(){var section;$(this).closest("section").find(".container").addClass("fadeOut");var src=$(this).attr("data-video-id"),startat=$(this).attr("data-start-at");$(this).attr("data-property","{videoURL:'http://youtu.be/"+src+"',containment:'self',autoPlay:true, mute:true, startAt:"+startat+", opacity:1, showControls:false}")})),$(".player").length&&$(".player").each((function(){var section=$(this).closest("section"),player=section.find(".player");player.YTPlayer(),player.on("YTPStart",(function(e){section.find(".container").removeClass("fadeOut"),section.find(".masonry-loader").addClass("fadeOut")}))})),$(".map-holder").click((function(){$(this).addClass("interact")})),$(".map-holder").length&&$(window).scroll((function(){$(".map-holder.interact").length&&$(".map-holder.interact").removeClass("interact")})),$(".countdown").length&&$(".countdown").each((function(){var date=$(this).attr("data-date");$(this).countdown(date,(function(event){$(this).text(event.strftime("%D days %H:%M:%S"))}))})),$("form.form-email, form.form-newsletter").submit((function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var thisForm=$(this).closest("form.form-email, form.form-newsletter"),submitButton=thisForm.find('button[type="submit"]'),error=0,originalError=thisForm.attr("original-error"),preparedForm,iFrame,userEmail,userFullName,userFirstName,userLastName,successRedirect,formError,formSuccess;if(iFrame=$(thisForm).find("iframe.mail-list-form"),thisForm.find(".form-error, .form-success").remove(),submitButton.attr("data-text",submitButton.text()),thisForm.append('<div class="form-error" style="display: none;">'+thisForm.attr("data-error")+"</div>"),thisForm.append('<div class="form-success" style="display: none;">'+thisForm.attr("data-success")+"</div>"),formError=thisForm.find(".form-error"),formSuccess=thisForm.find(".form-success"),thisForm.addClass("attempted-submit"),iFrame.length&&void 0!==iFrame.attr("srcdoc")&&""!==iFrame.attr("srcdoc"))if(console.log("Mail list form signup detected."),void 0!==originalError&&!1!==originalError&&formError.html(originalError),userEmail=$(thisForm).find(".signup-email-field").val(),userFullName=$(thisForm).find(".signup-name-field").val(),userFirstName=$(thisForm).find("input.signup-first-name-field").length?$(thisForm).find("input.signup-first-name-field").val():$(thisForm).find(".signup-name-field").val(),userLastName=$(thisForm).find(".signup-last-name-field").val(),1!==validateFields(thisForm)){(preparedForm=prepareSignup(iFrame)).find("#mce-EMAIL, #fieldEmail").val(userEmail),preparedForm.find("#mce-LNAME, #fieldLastName").val(userLastName),preparedForm.find("#mce-FNAME, #fieldFirstName").val(userFirstName),preparedForm.find("#mce-NAME, #fieldName").val(userFullName),thisForm.removeClass("attempted-submit"),formError.fadeOut(200),submitButton.html(jQuery("<div />").addClass("form-loading")).attr("disabled","disabled");try{$.ajax({url:preparedForm.attr("action"),crossDomain:!0,data:preparedForm.serialize(),method:"GET",cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(data){"success"!=data.result&&200!=data.Status?(formError.attr("original-error",formError.text()),formError.html(data.msg).fadeIn(1e3),formSuccess.fadeOut(1e3),submitButton.html(submitButton.attr("data-text")).removeAttr("disabled")):(submitButton.html(submitButton.attr("data-text")).removeAttr("disabled"),void 0!==(successRedirect=thisForm.attr("success-redirect"))&&!1!==successRedirect&&""!==successRedirect&&(window.location=successRedirect),thisForm.find('input[type="text"]').val(""),thisForm.find("textarea").val(""),formSuccess.fadeIn(1e3),formError.fadeOut(1e3),setTimeout((function(){formSuccess.fadeOut(500)}),5e3))}})}catch(err){formError.attr("original-error",formError.text()),formError.html(err.message).fadeIn(1e3),formSuccess.fadeOut(1e3),setTimeout((function(){formError.fadeOut(500)}),5e3),submitButton.html(submitButton.attr("data-text")).removeAttr("disabled")}}else formError.fadeIn(1e3),setTimeout((function(){formError.fadeOut(500)}),5e3);else console.log("Send email form detected."),void 0!==originalError&&!1!==originalError&&formError.text(originalError),1===(error=validateFields(thisForm))?(formError.fadeIn(200),setTimeout((function(){formError.fadeOut(500)}),3e3)):(thisForm.removeClass("attempted-submit"),formError.fadeOut(200),submitButton.html(jQuery("<div />").addClass("form-loading")).attr("disabled","disabled"),jQuery.ajax({type:"POST",url:"mail/mail.php",data:thisForm.serialize()+"&url="+window.location.href,success:function(response){submitButton.html(submitButton.attr("data-text")).removeAttr("disabled"),$.isNumeric(response)?parseInt(response)>0&&(void 0!==(successRedirect=thisForm.attr("success-redirect"))&&!1!==successRedirect&&""!==successRedirect&&(window.location=successRedirect),thisForm.find('input[type="text"]').val(""),thisForm.find("textarea").val(""),thisForm.find(".form-success").fadeIn(1e3),formError.fadeOut(1e3),setTimeout((function(){formSuccess.fadeOut(500)}),5e3)):(formError.attr("original-error",formError.text()),formError.text(response).fadeIn(1e3),formSuccess.fadeOut(1e3))},error:function(errorObject,errorText,errorHTTP){formError.attr("original-error",formError.text()),formError.text(errorHTTP).fadeIn(1e3),formSuccess.fadeOut(1e3),submitButton.html(submitButton.attr("data-text")).removeAttr("disabled")}}));return!1})),$(".validate-required, .validate-email").on("blur change",(function(){validateFields($(this).closest("form"))})),$("form").each((function(){$(this).find(".form-error").length&&$(this).attr("original-error",$(this).find(".form-error").text())})),getURLParameter("ref")&&$("form.form-email").append('<input type="text" name="referrer" class="hidden" value="'+getURLParameter("ref")+'"/>'),/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)&&$("section").removeClass("parallax"),$(".disqus-comments").length){var disqus_shortname=$(".disqus-comments").attr("data-shortname");(dsq=document.createElement("script")).type="text/javascript",dsq.async=!0,dsq.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq)}if(document.querySelector("[data-maps-api-key]")&&!document.querySelector(".gMapsAPI")&&$("[data-maps-api-key]").length){var script=document.createElement("script"),apiKey=$("[data-maps-api-key]:first").attr("data-maps-api-key");script.type="text/javascript",script.src="https://maps.googleapis.com/maps/api/js?key="+apiKey+"&callback=initializeMaps",script.className="gMapsAPI",document.body.appendChild(script)}})),$(window).load((function(){"use strict";setTimeout(initializeMasonry,1e3),mr_firstSectionHeight=$(".main-container section:nth-of-type(1)").outerHeight(!0)})),window.initializeMaps=function(){"undefined"!=typeof google&&void 0!==google.maps&&$(".map-canvas[data-maps-api-key]").each((function(){var mapInstance=this,mapJSON=void 0!==$(this).attr("data-map-style")&&$(this).attr("data-map-style"),mapStyle=JSON.parse(mapJSON)||[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}],zoomLevel=void 0!==$(this).attr("data-map-zoom")&&""!==$(this).attr("data-map-zoom")?1*$(this).attr("data-map-zoom"):17,latlong=void 0!==$(this).attr("data-latlong")&&$(this).attr("data-latlong"),latitude=!!latlong&&1*latlong.substr(0,latlong.indexOf(",")),longitude=!!latlong&&1*latlong.substr(latlong.indexOf(",")+1),geocoder=new google.maps.Geocoder,address=void 0!==$(this).attr("data-address")?$(this).attr("data-address").split(";"):[""],markerTitle="We Are Here",isDraggable,map,marker,markerImage,mapOptions={draggable:$(document).width()>766,scrollwheel:!1,zoom:zoomLevel,disableDefaultUI:!0,styles:mapStyle};null!=$(this).attr("data-marker-title")&&""!=$(this).attr("data-marker-title")&&(markerTitle=$(this).attr("data-marker-title")),null!=address&&""!=address[0]?geocoder.geocode({address:address[0].replace("[nomarker]","")},(function(results,status){if(status==google.maps.GeocoderStatus.OK){var map=new google.maps.Map(mapInstance,mapOptions);map.setCenter(results[0].geometry.location),address.forEach((function(address){var markerGeoCoder;if(markerImage={url:null==window.mr_variant?"img/mapmarker.png":"../img/mapmarker.png",size:new google.maps.Size(50,50),scaledSize:new google.maps.Size(50,50)},/(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)/.test(address))var latlong=address.split(","),marker=new google.maps.Marker({position:{lat:1*latlong[0],lng:1*latlong[1]},map:map,icon:markerImage,title:markerTitle,optimised:!1});else address.indexOf("[nomarker]")<0&&(markerGeoCoder=new google.maps.Geocoder).geocode({address:address.replace("[nomarker]","")},(function(results,status){status==google.maps.GeocoderStatus.OK&&(marker=new google.maps.Marker({map:map,icon:markerImage,title:markerTitle,position:results[0].geometry.location,optimised:!1}))}))}))}else console.log("There was a problem geocoding the address.")})):null!=latitude&&""!=latitude&&0!=latitude&&null!=longitude&&""!=longitude&&0!=longitude&&(mapOptions.center={lat:latitude,lng:longitude},map=new google.maps.Map(mapInstance,mapOptions),marker=new google.maps.Marker({position:{lat:latitude,lng:longitude},map:map,icon:markerImage,title:markerTitle}))}))},initializeMaps();var mr_cookies={getItem:function(sKey){return sKey&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey))return!1;var sExpires="";if(vEnd)switch(vEnd.constructor){case Number:sExpires=vEnd===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString()}return document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":""),!0},removeItem:function(sKey,sPath,sDomain){return!!this.hasItem(sKey)&&(document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:""),!0)},hasItem:function(sKey){return!!sKey&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),nLen=aKeys.length,nIdx=0;nIdx<nLen;nIdx++)aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]);return aKeys}};resetRadios=function(){document.querySelectorAll(".radio-option").forEach((function(option){option.classList.remove("checked")})),document.querySelectorAll(".radio-value").forEach((function(option){option.checked=!1}))},$("#other").on("click",(function(){resetRadios()}));